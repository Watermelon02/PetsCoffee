# ***PetsCoffee***

## 简要介绍：

​	红岩寒假考核作业，一个模拟经营游戏（？）——照顾培养你的宠物，使营业时能赚取更多钱钱（宠物的状态与天气（通过ip地址查询获取）会产生一定影响），并由此购买更多的道具，更多的宠物。并实时同步你的数据于网络，与好友分享你的游戏进度，也可以访问好友的店铺留下你的留言。

## 功能展示：

## ![show](./show.gif)

## 技术亮点：

- mvvm架构

- 实现了一些简单的自定义view：

  v p中可以进行抚摸、喂食、洗澡的宠物view，

  留言版界面的可以拖拽，点击的button

  继承了NestedScrollingParent2的下拉刷新ViewGroup（还有不少问题），

  上滑加载部分是通过监听onScrollStateChanged实现的

- 封装了具有一定retrofit和网络请求功能的网络请求工具（网络请求部分是使用封装的HttpUrlConnection）

- 写了简单的后端来实时同步各种游戏数据（双端存储数据并实时同步，本地使用了room数据库，服务器为spring boot+mongodb,使用了spring aop来进行异常处理和记录一些操作。分页也是通过服务器端接收页码和每页数据量实现的）

## 心得体会：

这个项目从军训时刚刚接触java就在逐步的迭代

第一个版本还是纯命令行文字交互；

第二个大版本是在进安卓后重写的，游戏数据还是sp存储，在不同acticity之间以intent.extra进行传递；

之后又陆陆续续的实现了本地room存储,部分采用mvvm,重写model类，采用kt，大量修改ui（至少现在勉强能看了），增加自定义view，又再次重写大部分模块逻辑的实现，进一步采用mvvm以减少以前乱写导致的许多模块粘在一起问题。

一步一步感觉到相当多的不足，不断完善ing

## 有待提升：

1. 滑动嵌套和CoordinateLayout的理解还远远不够，这直接导致留言板界面出现的一些问题。
2. 很多功能其实并不完善，比如天气系统只写了获取数据的部分；留言板和好友系统因为最开始没想到，所以在设计bean的时候就没有评论和点赞的部分。而写留言的功能因为想不到能加上什么亮点所以就没写
3. 后端的坑太大了，连皮毛都没摸到，但这也没办法，只能以后看有没有机会。。。。。
4. 希望能接着学习flow和协程来代替livedata